/*!
 bgStretcher 3.1.0 jQuery Plugin
 (c) 2010-2013 www.w3Blender.com
 For any questions and support please visit www.w3blender.com.
 */(function(e){var t,n,r,i,s;t=[];n=[];r=0;s=[];i={imageWidth:0,imageHeight:0,marginLeft:0,marginTop:0};var o=function(){return typeof console!="undefined"&&console!==null},u=function(e){o()?console.log(e):alert(e)},a=function(){if(navigator.appName==="Microsoft Internet Explorer"){var e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(e.exec(navigator.userAgent)!==null&&parseFloat(RegExp.$1)<=6)return!0}return!1},f={containerId:"bgstretcher",resizeProportionally:!0,resizeAnimate:!1,isPaused:!1,images:[],imageWidth:1024,imageHeight:768,maxWidth:"auto",maxHeight:"auto",nextSlideDelay:6e3,slideShowSpeed:"normal",slideShow:!0,transitionEffect:"fade",slideDirection:"N",sequenceMode:"normal",buttonPrev:"",buttonNext:"",pagination:"",anchoring:"left top",anchoringImg:"left top",preloadImages:!1,startElementIndex:0,sliderCallbackFunc:null};e.fn.bgStretcher=function(t){var n=f,r=e(this),o=function(){n=e.extend({},f,t);r.settings=n;s[n.containerId]=null;if(e("#"+n.containerId).length>0){u("Error: Duplicate element ID.");return!1}if(n.images.length<=0){u("Error: Images array cannot be empty!");return!1}r.addClass("bgstretcher-container");l(r);r.data("instance",r);return r},l=function(t){h(t);if(r.length<1)return;var i=e("#"+r.settings.containerId,r);i.find("LI").hide().css({"z-index":1,overflow:"hidden"});e(window).unbind("resize").bind("resize",function(){e(".bgstretcher-container").each(function(t,n){var r=e(n).data("instance");c(e(n));r.settings.transitionEffect=="superSlide"&&e(n).find("UL").css({top:0})})});!0===a()&&e(window).unbind("scroll").bind("scroll",function(){r.css("top",e(window).scrollTop())});c(r);var o=0,f=0,l=0,p=i.find("LI");i.find("UL").css({left:0,top:0});i.find("LI.bgs-current").removeClass("bgs-current");i.find("LI:first").addClass("bgs-current");if(r.settings.transitionEffect==="simpleSlide"){if(r.settings.slideDirection==="random"){r.settings.slideDirection="normal";u("The effect 'simpleSlide cannot be used in mode 'random'. The mode has been automatically switched to 'normal'.")}e(p).css({"float":"left",position:"static"}).show();if(r.settings.slideDirection==="NW"||r.settings.slideDirection==="NE")r.settings.slideDirection="N";if(r.settings.slideDirection==="SW"||r.settings.slideDirection==="SE")r.settings.slideDirection="S";if(r.settings.slideDirection==="S"||r.settings.slideDirection==="E"){r.settings.sequenceMode="back";e(p).removeClass("bgs-current");e(p).eq(e(p).length-r.settings.startElementIndex-1).addClass("bgs-current");if(r.settings.slideDirection==="E"){f=e(p).index(i.find("LI.bgs-current"))*i.width()*-1;l=0}else{l=e(p).index(i.find("LI.bgs-current"))*i.height()*-1;f=0}i.find("UL").css({left:f+"px",top:l+"px"})}else{n.sequenceMode="normal";if(r.settings.startElementIndex!==0){if(r.settings.slideDirection==="N"){l=e(p).index(i.find("LI.bgs-current"))*e(i).height()*-1;f=0}else{f=e(p).index(i.find("LI.bgs-current"))*e(i).width()*-1;l=0}i.find("UL").css({left:f+"px",top:l+"px"})}}}if(e(r.settings.buttonNext).length||e(r.settings.buttonPrev).length||e(r.settings.pagination).length)if(r.settings.sequenceMode==="random")u("'random' mode cannot be used when prevButton, nextButton and/or pagination is active.");else{if(e(r.settings.buttonPrev).length){e(r.settings.buttonPrev).addClass("bgStretcherNav bgStretcherNavPrev");e(r.settings.buttonPrev).click(function(){r.bgStretcher.buttonSlide(r,"prev")})}if(e(r.settings.buttonNext).length){e(r.settings.buttonNext).addClass("bgStretcherNav bgStretcherNavNext");e(r.settings.buttonNext).click(function(){r.bgStretcher.buttonSlide(r,"next")})}e(r.settings.pagination).length&&r.bgStretcher.pagination(r)}if(n.sequenceMode==="random"){var d=Math.floor(Math.random()*e(p).length);r.bgStretcher.buildRandom(r,d);n.transitionEffect!=="simpleSlide"&&(r.settings.startElementIndex=d);o=d}else{r.settings.startElementIndex>e(p).length-1&&(r.settings.startElementIndex=0);o=r.settings.startElementIndex;n.transitionEffect==="simpleSlide"&&(r.settings.slideDirection==="S"||r.settings.slideDirection==="E")&&(o=e(p).length-1-r.settings.startElementIndex)}e(p).eq(o).show().addClass("bgs-current");r.bgStretcher.preloadImage(e(p).eq(o));r.settings.slideShow&&e(p).length>1&&(r.settings.isPaused||(s[n.containerId]=setTimeout(function(){r.bgStretcher.slideShow(r,r.settings.sequenceMode,-1)},n.nextSlideDelay)))},c=function(t){var s=0,o=0,a=0,f=0,l=0,c=0,h=e(t).find(".bgstretcher");if(e(t).get(0).nodeName=="BODY"){e(".bgstretcher",t).css({position:"fixed",top:0});s=parseInt(e(window).width(),10);o=parseInt(e(window).height(),10)}else{e(".bgstretcher",t).css({position:"absolute",top:0});s=parseInt(t.width(),10);o=parseInt(t.height(),10)}n.maxWidth!=="auto"?a=s>n.maxWidth?n.maxWidth:s:a=s;n.maxHeight!=="auto"?f=o>n.maxHeight?n.maxHeight:o:f=o;h.width(a).height(f);if(!1===n.resizeProportionally){l=a;c=f}else{var p=n.imageWidth,d=n.imageHeight,v=d/p;l=a;c=Math.round(a*v);if(c<f){c=f;l=Math.round(c/v)}}var m=0,g=0,y;if(n.anchoring!=="left top"){y=n.anchoring.split(" ");if(y.length===2){y[0]==="right"?m=s-a:y[0]==="center"&&(m=Math.round((s-a)/2));y[1]==="bottom"?g=o-f:y[1]==="center"&&(g=Math.round((o-f)/2));h.css({marginLeft:m+"px",marginTop:g+"px"})}}m=0;g=0;if(n.anchoringImg!=="left top"){y=n.anchoringImg.split(" ");if(y.length===2){y[0]==="right"?m=a-l:y[0]==="center"&&(m=Math.round((a-l)/2));y[1]==="bottom"?g=f-c:y[1]==="center"&&(g=Math.round((f-c)/2))}}i.marginLeft=m;i.marginTop=g;if(t.find("LI:first").hasClass("swf-mode"))if(typeof SWFObject=="undefined")u("SWFObject is required if you would like to use flash with bgStretcher.");else{var b=e("#"+t.settings.containerId).find("LI:first").html();e("#"+t.settings.containerId).find("LI:first").html('<div id="bgstretcher-flash">&nbsp;</div>');var w=new SWFObject(b,"flash-obj",a,f,"9");w.addParam("wmode","transparent");w.write("bgstretcher-flash")}i.imageWidth=l;i.imageHeight=c;var E=h.children("UL").children("LI.img-loaded").find("IMG");n.resizeAnimate?e(E).animate({marginLeft:i.marginLeft,marginTop:i.marginTop,width:i.imageWidth,height:i.imageHeight},"normal"):e(E).css({marginLeft:i.marginLeft,marginTop:i.marginTop,width:i.imageWidth,height:i.imageHeight});h.find("LI").width(a).height(f);if(r.settings.transitionEffect==="simpleSlide")if(r.settings.slideDirection==="W"||r.settings.slideDirection==="E"){h.children("UL").width(h.width()*h.find("LI").length).height(h.height());h.find("LI").index(h.find("LI.bgs-current"))!==-1&&h.children("UL").css({left:h.find("LI").index(h.find("LI.bgs-current"))*h.width()*-1+"px"})}else{h.children("UL").height(h.height()*h.find("LI").length).width(h.width());h.find("LI").index(h.find("LI.bgs-current"))!==-1&&h.children("UL").css({top:h.find("LI").index(h.find("LI.bgs-current"))*t.height()*-1+"px"})}},h=function(t){var n="";t.each(function(){e(this).wrapInner('<div class="bgstretcher-page" />').wrapInner('<div class="bgstretcher-area" />');n='<div id="'+t.settings.containerId+'" class="bgstretcher"><ul>';if(t.settings.images.length>0){var r;r=t.settings.images[0].split(".");r=r[r.length-1];if(r!=="swf"){var i=0;for(var s=0;s<t.settings.images.length;s++){"simpleSlide"===t.settings.transitionEffect&&"back"===t.settings.sequenceMode?i=t.settings.images.length-1-s:i=s;!0===t.settings.preloadImages?n+='<li><span class="image-path">'+t.settings.images[i]+"</span></li>":n+='<li class="img-loaded"><div class="banner-content"><div class="mid"><div class="caption"><h2>'+t.settings.h2[i]+'</h2><h3>'+t.settings.h3[i]+'</h3></div></div></div><img src="'+t.settings.images[i]+'" alt="" /></li>'}}else n+='<li class="swf-mode">'+t.settings.images[0]+"</li>"}n+="</ul></div>";var o=e(this).children(".bgstretcher-area");e(n).prependTo(o);o.css({position:"relative"});o.children(".bgstretcher-page").css({position:"relative","z-index":3})})};return o(this)};e.fn.bgStretcher.preloadImage=function(t){if(t.hasClass("img-loaded"))return!0;t.find("SPAN.image-path").each(function(){var t=e(this).html(),n="",r=e(this).parent(),s=new Image;e(s).load(function(){e(this).hide();r.prepend(this);e(this).fadeIn(100)}).error(function(){}).attr("src",t).attr("alt",n);e(s).css({marginLeft:i.marginLeft+"px",marginTop:i.marginTop+"px",width:i.imageWidth+"px",height:i.imageHeight+"px"})});t.addClass("img-loaded");return!0};e.fn.bgStretcher.play=function(t){t.settings.isPaused=!1;e(t).bgStretcher.clearSliderTimeout(t);e(t).bgStretcher.slideShow(t,t.settings.sequenceMode,-1)};e.fn.bgStretcher.clearSliderTimeout=function(e){if(s[e.settings.containerId]!==null){clearTimeout(s[e.settings.containerId]);s[e.settings.containerId]=null}};e.fn.bgStretcher.pause=function(t){t.settings.isPaused=!0;e(t).bgStretcher.clearSliderTimeout(t)};e.fn.bgStretcher.sliderDestroy=function(t){var n=e(".bgstretcher-page",t).html();e(t).html(n).removeClass("bgstretcher-container");e(t).bgStretcher.clearSliderTimeout(t);t.settings.isPaused=!1};e.fn.bgStretcher.slideShow=function(n,i,o){var u=e(n).data("instance").settings,a="#"+u.containerId,f=e(a).find("LI");if(f.length<2)return!0;if(o==undefined||o==null)o=-1;var l=e(a).find("LI.bgs-current"),c=!1;e(l).stop(!0,!0);if(o===-1)switch(i){case"back":c=l.prev();c.length||(c=e(a).find("LI:last"));break;case"random":if(r===f.length){e(n).bgStretcher.buildRandom(n,t[f.length-1]);r=0}c=f.eq(t[r]);r++;break;default:c=l.next();c.length||(c=e(a).find("LI:first"))}else c=f.eq(o);f.removeClass("bgs-current");e(n).bgStretcher.preloadImage(c);c.addClass("bgs-current");switch(u.transitionEffect){case"fade":e(n).bgStretcher.effectFade(n,l,c);break;case"simpleSlide":e(n).bgStretcher.simpleSlide(n);break;case"superSlide":e(n).bgStretcher.superSlide(n,l,c,i);break;default:e(n).bgStretcher.effectNone(n,l,c)}if(e(u.pagination).find("LI").length){e(u.pagination).find("LI.showPage").removeClass("showPage");e(u.pagination).find("LI").eq(f.index(e(a).find("LI.bgs-current"))).addClass("showPage")}u.sliderCallbackFunc&&typeof u.sliderCallbackFunc=="function"&&u.sliderCallbackFunc.call();u.isPaused||(s[u.containerId]=setTimeout(function(){e(n).bgStretcher.slideShow(n,u.sequenceMode,-1)},n.settings.nextSlideDelay));return!0};e.fn.bgStretcher.effectNone=function(e,t,n){n.show();t.hide()};e.fn.bgStretcher.effectFade=function(t,n,r){var i=e(t).data("instance").settings;r.fadeIn(i.slideShowSpeed);n.fadeOut(i.slideShowSpeed)};e.fn.bgStretcher.simpleSlide=function(t){var n,r,i=e(t).data("instance").settings,s=e("#"+i.containerId);if(i.slideDirection==="N"||i.slideDirection==="S"){r=s.find("LI").index(s.find("LI.bgs-current"))*s.height()*-1;n=0;s.find("UL").css({left:"0"})}else{n=s.find("LI").index(s.find("LI.bgs-current"))*s.width()*-1;r=0;s.find("UL").css({top:"0"})}s.find("UL").stop().animate({left:n+"px",top:r+"px"},i.slideShowSpeed)};e.fn.bgStretcher.superSlide=function(t,n,r,i){var s,o,u=e(t).data("instance").settings,a=e("#"+u.containerId);switch(u.slideDirection){case"S":o=a.height();s=0;break;case"E":o=0;s=a.width();break;case"W":o=0;s=a.width()*-1;break;case"NW":o=a.height()*-1;s=a.width()*-1;break;case"NE":o=a.height()*-1;s=a.width();break;case"SW":o=a.height();s=a.width()*-1;break;case"SE":o=a.height();s=a.width();break;default:o=a.height()*-1;s=0}if(i==="back"){r.css({"z-index":2,top:o+"px",left:s+"px"});r.show();r.animate({left:"0px",top:"0px"},u.slideShowSpeed,function(){n.hide();e(this).css({"z-index":1})})}else{n.css("z-index",2);r.show();n.animate({left:s+"px",top:o+"px"},u.slideShowSpeed,function(){e(this).hide().css({"z-index":1,top:"0px",left:"0px"})})}};e.fn.bgStretcher.buildRandom=function(r,i){var s=e(r).find("LI").length,o,u,a;for(o=0;o<s;o++){t[o]=o;n[o]=Math.random()*s}for(o=0;o<s;o++)for(u=0;u<s-o-1;u++)if(n[u]>n[u+1]){a=n[u];n[u]=n[u+1];n[u+1]=a;a=t[u];t[u]=t[u+1];t[u+1]=a}if(t[0]===i){a=t[0];t[0]=t[s-1];t[s-1]=a}};e.fn.bgStretcher.buttonSlide=function(t,n){var r=t.settings,i=e("#"+r.containerId).find("LI");if(e(i).length<2)return!1;var s="";if(n==="prev"){s="back";r.sequenceMode==="back"&&(s="normal")}else s=r.sequenceMode;e(i).stop(!0,!0);e(t).bgStretcher.clearSliderTimeout(t);e(t).bgStretcher.slideShow(t,s,-1);return!1};e.fn.bgStretcher.pagination=function(t){var n=e("#"+t.settings.containerId).find("LI"),r=n.length,i="",s=0,o=t.settings;if(r>0){i+="<ul>";for(s=0;s<r;s++)i+='<li class="page-'+(s+1)+'"><a href="javascript:;">'+(s+1)+"</a></li>";i+="</ul>";e(o.pagination).html(i);e(o.pagination).find("LI:first").addClass("showPage");e(o.pagination).find("A").click(function(){if(e(this).parent().hasClass("showPage"))return!1;n.stop(!0,!0);e(t).bgStretcher.clearSliderTimeout(t);e(t).bgStretcher.slideShow(t,o.sequenceMode,e(o.pagination).find("A").index(e(this)));return!1})}return!1}})(jQuery);